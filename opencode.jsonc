{
  "$schema": "https://opencode.ai/config.json",
  "theme": "opencode",
  "share": "disabled",
  "model": "github-copilot/claude-sonnet-4.5",
  "small_model": "github-copilot/claude-haiku-4.5",
  "instructions": ["OPENCODE.md"],

  // MCP Servers
  "mcp": {
    "tavily": {
      "type": "remote",
      "url": "https://mcp.tavily.com/mcp/",
      "oauth": false,
      "headers": {
        "Authorization": "Bearer {env:TAVILY_API_KEY}",
      },
    },
  },

  // Specialized agents
  "agents": {
    "diagram-generator": {
      "path": ".opencode/agent/diagram-generator.md",
    },
  },

  // Global permissions
  "permission": {
    "edit": "ask",
    "bash": "ask",

    // Disable MCP tools globally - agents enable as needed
    "tools": {
      "tavily_*": "deny",
    },

    "read": {
      "*": "allow",

      // Environment files
      "*.env": "deny",
      "*.env.*": "deny",
      "*.env.example": "allow",
      ".secrets": "deny",
      "secrets.yaml": "deny",
      "secrets.yml": "deny",
      "**/secrets/**": "deny",

      // SOPS encrypted files
      "*.sops.yaml": "deny",
      "*.sops.yml": "deny",
      "**/*.sops.yaml": "deny",
      "**/*.sops.yml": "deny",
      "**/*.enc": "deny",
      ".sops.yaml": "deny",
      ".decrypted~*": "deny",

      // SSH keys and certificates
      "*.key": "deny",
      "*.pem": "deny",
      "*.crt": "deny",
      "*.cer": "deny",
      "*.p12": "deny",
      "*.pfx": "deny",
      "id_rsa": "deny",
      "id_rsa.pub": "deny",
      "id_ed25519": "deny",
      "id_ed25519.pub": "deny",
      "**/.ssh/**": "deny",

      // Age/GPG encryption keys
      "keys.txt": "deny",
      "age.key": "deny",
      "*.age": "deny",
      "*.gpg": "deny",
      "*.asc": "deny",
      "*.pgp": "deny",

      // Kubeconfig
      "**/kubeconfig": "deny",
      "kubeconfig.*": "deny",
      "*.kubeconfig": "deny",

      // Ansible Vault
      "ansible-vault.*": "deny",

      // Terraform state
      "*.tfstate": "deny",
      "*.tfstate.*": "deny",
      "terraform.tfstate*": "deny",
      "terraform.tfvars": "deny",
      "terraform.tfvars.json": "deny",

      // Private directories
      ".private/**": "deny",
    },
  },
}
